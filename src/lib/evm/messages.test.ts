import { type SourceTokenData, parseSourceTokenData } from './messages.ts'

describe('encode/parseSourceTokenData', () => {
  const decoded: SourceTokenData = {
    sourcePoolAddress: '0x0000000000000000000000006987756a2fc8e4f3f0a5e026cb200cc2b5221b1f',
    destTokenAddress: '0x000000000000000000000000cc44ff0e5a1fc9a6f3224ef0f47f0c03b3f8eaee',
    extraData: '0xd8e78c2c6144d59c308cee0365b6d223a9cea73dd7a46e990505271b4abb47b4',
    destGasAmount: 1515322476n,
  }
  const encoded =
    '0x0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000005a51fc6c00000000000000000000000000000000000000000000000000000000000000200000000000000000000000006987756a2fc8e4f3f0a5e026cb200cc2b5221b1f0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000cc44ff0e5a1fc9a6f3224ef0f47f0c03b3f8eaee0000000000000000000000000000000000000000000000000000000000000020d8e78c2c6144d59c308cee0365b6d223a9cea73dd7a46e990505271b4abb47b4'

  it('should parse v1.5 message.sourceTokenData', () => {
    expect(parseSourceTokenData(encoded)).toEqual(decoded)
  })
})
